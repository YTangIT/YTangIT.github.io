var _ubaInnerParams=_ubaInnerParams||{};_ubaInnerParams.SERVER_URL="https://uba.huaweicloud.com/sdk/";_ubaInnerParams.SERVER_URL_HK="https://uba-intl.huaweicloud.com/sdk/";_ubaInnerParams.appKey=_ubaInnerParams.appKey||"";_ubaInnerParams.visitKey;_ubaInnerParams.fromPageName=document.referrer;_ubaInnerParams.sessionID="";_ubaInnerParams.sidStartTime="";_ubaInnerParams.lastAdSource="";_ubaInnerParams.lastAccessTime="";_ubaInnerParams.pageHide=false;_ubaInnerParams.unloadActive=false;_ubaInnerParams.channelFrom;_ubaInnerParams.stgForDeliver={};_ubaInnerParams.timinhObj=window.performance?window.performance.timing:"";_ubaInnerParams.expireDateTime=0;_ubaInnerParams.plt=0;_ubaInnerParams.vk=getCookieValue("vk");_ubaInnerParams.zone=getLocalTimeZone();_ubaInnerParams.ad_sc="";_ubaInnerParams.ad_mdm="";_ubaInnerParams.cf="";_ubaInnerParams.ad_cmp="";_ubaInnerParams.ad_ctt="";_ubaInnerParams.ad_tm="";var _ubaHashChange=false;function _initCloudBI(a,c){if(a){_ubaInnerParams.appKey=a}_ubaInnerParams.unloadActive=false;if(window.name){try{_ubaInnerParams.stgForDeliver=JSON.parse(window.name);for(var b in _ubaInnerParams.stgForDeliver){setLocalStorage(b,_ubaInnerParams.stgForDeliver[b])}}catch(d){_ubaInnerParams.stgForDeliver={}}}_ubaInnerParams.visitKey=getCookieValue("vk");if(_ubaInnerParams.visitKey===""){_ubaInnerParams.visitKey=getLocalStorage("vk");if(_ubaInnerParams.visitKey){addCookie("vk",_ubaInnerParams.visitKey,10*365,"/")}else{_ubaInnerParams.visitKey=guidGenerator();addCookie("vk",_ubaInnerParams.visitKey,10*365,"/");setLocalStorage("vk",_ubaInnerParams.visitKey)}}else{setLocalStorage("vk",_ubaInnerParams.visitKey)}if(_ubaInnerParams.visitKey.toString().length===19){_ubaInnerParams.visitKey=guidGenerator();addCookie("vk",_ubaInnerParams.visitKey,10*365,"/");setLocalStorage("vk",_ubaInnerParams.visitKey)}_ubaInnerParams.vk=getCookieValue("vk");_ubaInnerParams.sessionID=getCookieValue("SessionID");if(!_ubaInnerParams.sessionID){refreshSession();storageAdField()}clearStorage();if(c){setParams(c)}setAdField();domHasAlready();setPLT();dealSession()}function sendEvent(c,e,d,b,f,a){}function _sendEvent(a,b,d,h,i,f){try{var c={};c.AccessTime=getNowFormatDate(new Date());c.UserAccount=_ubaParams.userAccount;c.MemberID=_ubaParams.memberID;if(f&&(f.AppKey||f.Appkey)){_ubaInnerParams.appKey=f.AppKey||f.Appkey}c.AppKey=_ubaInnerParams.appKey;c.EventName=a;c.PageName=window.location.href;c.EventCategory=b;c.EventAction=d;c.EventLabel=h;c.Value=i;c.VisitKey=_ubaInnerParams.vk;c.Zone=_ubaInnerParams.zone||getLocalTimeZone();c=AdProcess(c);c=setExtendOptionsByStorage_str(c);if(f){for(var j in f){if(_ubaParams.bi_C1_20.indexOf(j)>=0||_ubaParams.bi_D1_20.indexOf(j)>=0||(j=="subPage")){c[j]=f[j]}}}c.plt=_ubaInnerParams.plt||setPLT();if(!c.C1){c.C1=document.title}var k=formatData(c);xssPost(k)}catch(g){var k=formatData({AppKey:_ubaInnerParams.appKey,EventName:a,PageName:window.location.href,EventLable:"Exception"});xssPost(k)}}function _sendPageView(b){try{var d={};d.AccessTime=getNowFormatDate(new Date());d.UserAccount=_ubaParams.userAccount;d.MemberID=_ubaParams.memberID;if(b&&(b.AppKey||b.Appkey)){_ubaInnerParams.appKey=b.AppKey||b.Appkey}d.AppKey=_ubaInnerParams.appKey;d.EventName="pageview";d.PageName=window.location.href;setLocalStorage("oldPage",window.location.href);d.PageViewID=_ubaParams.pageViewID;d.EventMode=0;d.VisitKey=_ubaInnerParams.vk;d.FromPageName=_ubaInnerParams.fromPageName;d.Zone=_ubaInnerParams.zone||getLocalTimeZone();d=AdProcess(d);d=setExtendOptionsByStorage_str(d);if(b){for(var c in b){if(_ubaParams.bi_C1_20.indexOf(c)>=0||_ubaParams.bi_D1_20.indexOf(c)>=0||(c=="subPage")){d[c]=b[c]}}}d.plt=_ubaInnerParams.plt||setPLT();if(!d.C1){d.C1=document.title}d.loadEventStart=_ubaInnerParams.timinhObj.loadEventStart;d.navigationStart=_ubaInnerParams.timinhObj.navigationStart;var a=formatData(d);xssPost(a)}catch(f){var a=formatData({VisitKey:_ubaInnerParams.vk,AppKey:_ubaInnerParams.appKey,EventName:"pageview",PageName:window.location.href,EventLable:"Exception"});xssPost(a)}}function _reportcurrent(){var b={};b.AccessTime=getNowFormatDate(new Date());b.UserAccount=_ubaParams.userAccount;b.MemberID=_ubaParams.memberID;b.AppKey=_ubaInnerParams.appKey;b.EventName="pageview";b.PageName=getLocalStorage("oldPage");setLocalStorage("oldPage",window.location.href);b.PageViewID=getLocalStorage("oldPID");_ubaParams.pageViewID=guidGenerator();setLocalStorage("oldPID",_ubaParams.pageViewID);b.EventMode=1;b.VisitKey=_ubaInnerParams.vk;b.FromPageName=_ubaInnerParams.fromPageName;b.Zone=getLocalTimeZone();if(getLocalStorage("sbp")){b.subPage=getLocalStorage("sbp")}b=AdProcess(b);b=setExtendOptionsByStorage_str(b);b.plt=_ubaInnerParams.plt||setPLT();if(!b.C1){b.C1=document.title}var a=formatData(b);xssPost(a)}function xssPost(a){var c;if(window.location.host.indexOf("intl.huaweicloud.com")>-1){c=_ubaInnerParams.SERVER_URL_HK+"download/1.png?"+a}else{c=_ubaInnerParams.SERVER_URL+"download/1.png?"+a}var b=new Image;b.src=c;if(typeof _ubaHashChange!=undefined&&_ubaHashChange){_ubaHashChange=false}else{beforeUnloadHandler()}}function setPLT(){_ubaInnerParams.timinhObj=window.performance?window.performance.timing:"";if(_ubaInnerParams.timinhObj&&_ubaInnerParams.timinhObj.loadEventStart&&_ubaInnerParams.timinhObj.navigationStart){var a=_ubaInnerParams.timinhObj.loadEventStart-_ubaInnerParams.timinhObj.navigationStart;if(a>180000){return 0}_ubaInnerParams.plt=a;return a}return 0}function beforeUnloadHandler(){var b=new Date();var c=b.getTime()+120;if(!_ubaInnerParams.expireDateTime||c>_ubaInnerParams.expireDateTime){_ubaInnerParams.expireDateTime=c}var a;if(_ubaInnerParams.expireDateTime){do{a=new Date()}while(a.getTime()<_ubaInnerParams.expireDateTime)}}function formatData(d){if(!(typeof d==="object")){console.log("error formatData");return""}var c="";var b="";for(var a in d){if(d[a]!==""&&d[a]!==null&&d[a]!==undefined){b="";try{b=encodeURIComponent(d[a])}catch(f){b=d[a]}c=c+a+"="+b+"&"}}c=c+"type=2";return c}function AdProcess(a){a.AdSource=_ubaInnerParams.ad_sc;a.ChannelFrom=_ubaInnerParams.cf;a.AdMedium=_ubaInnerParams.ad_mdm;a.AdCampaign=_ubaInnerParams.ad_cmp;a.AdContent=_ubaInnerParams.ad_ctt;a.AdTerm=_ubaInnerParams.ad_tm;return a}function storageAdField(){_ubaInnerParams.ad_sc=getUrlAttr("utm_source");addCookie("ad_sc",_ubaInnerParams.ad_sc||"",0,"/");_ubaInnerParams.ad_mdm=getUrlAttr("utm_medium");addCookie("ad_mdm",_ubaInnerParams.ad_mdm||"",0,"/");_ubaInnerParams.ad_cmp=getUrlAttr("utm_campaign");addCookie("ad_cmp",_ubaInnerParams.ad_cmp||"",0,"/");_ubaInnerParams.ad_ctt=getUrlAttr("utm_content");addCookie("ad_ctt",_ubaInnerParams.ad_ctt||"",0,"/");_ubaInnerParams.ad_tm=getUrlAttr("utm_term");addCookie("ad_tm",_ubaInnerParams.ad_tm||"",0,"/")}function setAdField(){_ubaInnerParams.ad_sc=getCookieValue("ad_sc");_ubaInnerParams.cf=getCookieValue("cf");_ubaInnerParams.ad_mdm=getCookieValue("ad_mdm");_ubaInnerParams.ad_cmp=getCookieValue("ad_cmp");_ubaInnerParams.ad_ctt=getCookieValue("ad_ctt");_ubaInnerParams.ad_tm=getCookieValue("ad_tm")}function refreshSession(){_ubaInnerParams.sessionID=guidGenerator();addCookie("SessionID",_ubaInnerParams.sessionID,0,"/");_ubaInnerParams.sidStartTime=getNowFormatDate(new Date());setLocalStorage("sidStartTime",_ubaInnerParams.sidStartTime)}function dealSession(b){var a=getUrlAttr("utm_source");if(a||getUrlAttr("utm_medium")||getUrlAttr("utm_campaign")||getUrlAttr("utm_content")||getUrlAttr("utm_term")){storageAdField()}var c=_ubaInnerParams.ad_sc;_ubaInnerParams.channelFrom=c||_ubaInnerParams.cf;if(c){if(getCookieValue("LastAdSource")!=c){storageAdField()}_ubaInnerParams.channelFrom=c;addCookie("cf",_ubaInnerParams.channelFrom,0,"/");_ubaInnerParams.cf=_ubaInnerParams.channelFrom;_ubaInnerParams.lastAdSource=c;addCookie("LastAdSource",_ubaInnerParams.lastAdSource,0,"/")}_ubaInnerParams.fromPageName=document.referrer;if((!c)&&_ubaInnerParams.fromPageName&&!hasSameTopLevelDomain()){if(!b){storageAdField()}_ubaInnerParams.channelFrom=getFullDomainName(_ubaInnerParams.fromPageName);_ubaInnerParams.cf=_ubaInnerParams.channelFrom;addCookie("cf",_ubaInnerParams.channelFrom,0,"/")}if((_ubaParams.userAccount!="host"&&_ubaParams.userAccount!=getLocalStorage("ua"))||(_ubaParams.memberID!=""&&_ubaParams.memberID!=getLocalStorage("biMid"))){setLocalStorage("ua",_ubaParams.userAccount);setLocalStorage("biMid",_ubaParams.memberID)}if(!_ubaInnerParams.channelFrom){_ubaInnerParams.channelFrom="Direct";addCookie("cf",_ubaInnerParams.channelFrom,0,"/");_ubaInnerParams.cf=_ubaInnerParams.channelFrom}}function hasSameTopLevelDomain(){return getTopLevelDomain(document.referrer)==getTopLevelDomain(window.location.href)?true:false}function getTopLevelDomain(b){var a=getFullDomainName(b).split(".");var d=["com","net","org","gov","edu","mil","biz","name","info","mobi","pro","travel","museum","int","areo","post","rec"];var c=0;while(c<d.length&&d[c]!=a[a.length-1]){c++}if(c<d.length){return a[a.length-2]+"."+a[a.length-1]}else{c=0;while(c<d.length&&d[c]!=a[a.length-2]){c++}if(c==d.length){return a[a.length-2]+"."+a[a.length-1]}else{return a[a.length-3]+"."+a[a.length-2]+"."+a[a.length-1]}}}function getFullDomainName(a){var c=a.indexOf("//");var b=a.indexOf("/",c+2);return a.substring(c+2,b)}function isSameDay(a){_ubaInnerParams.lastAccessTime=getCookieValue("LAT");if(!_ubaInnerParams.lastAccessTime){return true}return _ubaInnerParams.lastAccessTime.substring(0,8)==a.substring(0,8)?true:false}function clearStorage(){var a;for(var b=0;b<_ubaParams.bi_C1_20.length;b++){a=getLocalStorage(_ubaParams.bi_C1_20[b]);if(a){removeLocalStorage(_ubaParams.bi_C1_20[b]);continue}}for(var b=0;b<_ubaParams.bi_D1_20.length;b++){a=getLocalStorage(_ubaParams.bi_D1_20[b]);if(a){removeLocalStorage(_ubaParams.bi_D1_20[b]);continue}}removeLocalStorage("ak");removeLocalStorage("sbp")}function setParams(b){for(var a in b){if(a=="subPage"){setLocalStorage("sbp",b.subPage);continue}if(_ubaParams.bi_C1_20.indexOf(a)>=0){setLocalStorage(a,b[a]);continue}if(_ubaParams.bi_D1_20.indexOf(a)>=0){setLocalStorage(a,b[a]);continue}}}function setExtendOptionsByStorage_str(d){for(var c=0;c<_ubaParams.bi_C1_20.length;c++){var b=getLocalStorage(_ubaParams.bi_C1_20[c]);if(b){d[_ubaParams.bi_C1_20[c]]=b}}for(var c=0;c<_ubaParams.bi_D1_20.length;c++){var a=getLocalStorage(_ubaParams.bi_D1_20[c]);if(a){d[_ubaParams.bi_D1_20[c]]=a}}return d}function addCookie(b,c,f,d){var b=encodeURI(b);var c=encodeURI(c);var a=new Date();if(f==0){document.cookie=b+"="+c+";domain="+document.domain.split(".").slice(-2).join(".")+";path=/";return}a.setTime(a.getTime()+f*3600000*(24));d=";path=/";var e=(typeof f)=="string"?"":";expires="+a.toGMTString();cookies=b+"="+c+e+d+";domain="+document.domain.split(".").slice(-2).join(".");document.cookie=cookies}function getCookieValue(b){var b=encodeURI(b);var c=document.cookie;b+="=";var f=c.indexOf(b);if(f!=-1){var e=f+b.length;var a=c.indexOf(";",e);if(a==-1){a=c.length}var d=c.substring(e,a);return decodeURI(d)}else{return""}}function deleteCookie(b,c){var b=escape(b);var a=new Date(0);if(c){c=";path="+c}else{c=""}document.cookie=b+"=;expires="+a.toGMTString()+c+";domain="+document.domain.split(".").slice(-2).join(".")}function setLocalStorage(d,c){if(window.localStorage){if(c!=null&&c!=""){localStorage.setItem(d,c);_ubaInnerParams.stgForDeliver[d]=c;window.name=JSON.stringify(_ubaInnerParams.stgForDeliver)}else{localStorage.removeItem(d)}}else{addCookie(d,c,1/48,"/")}}function getLocalStorage(b){if(window.localStorage){return localStorage.getItem(b)}else{return getCookieValue(b)}}function removeLocalStorage(b){if(window.localStorage){_ubaInnerParams.stgForDeliver[b]=undefined;localStorage.removeItem(b)}else{deleteCookie(b,"/")}}function getLocalTimeZone(){var a=(new Date().getTimezoneOffset()/60)*(-1);if(a<10){a="+0"+a}else{a="+"+a}return a+"00"}function getNowFormatDate(c){var b="";var a="";var e=c.getUTCMonth()+1;var g=c.getUTCDate();var h=c.getUTCHours();var d=c.getUTCMinutes();var i=c.getUTCSeconds();e=addZero(e);g=addZero(g);h=addZero(h);d=addZero(d);i=addZero(i);var f=c.getUTCFullYear()+b+e+b+g+""+h+a+d+a+i;return f}function addZero(a){if(a>=1&&a<=9){a="0"+a}return a}function getUrlAttr(d){var a=window.location.href;d=d+"=";var c=a.indexOf(d);if(c>=0){var g=c+d.length;var f=a.indexOf("&",g);var e=a.indexOf("#",g);if(f<0){f=a.length}if(e<0){e=a.length}var b=Math.min(f,e);return a.slice(g,b)}return null}window.onhashchange=function(){_ubaHashChange=true;_reportcurrent()};function stateChanged(){if(document.hidden||document.webkitHidden||document.msHidden||document.mozHidden){if(_ubaInnerParams.pageHide==false){_ubaInnerParams.pageHide=true;_reportcurrent()}}}function domHasAlready(){attachEventListener(document,"visibilitychange",stateChanged);attachEventListener(document,"webkitvisibilitychange",stateChanged);attachEventListener(document,"msvisibilitychange",stateChanged);attachEventListener(document,"ovisibilitychange",stateChanged);attachEventListener(document,"mozvisibilitychange",stateChanged)}function attachEventListener(c,b,a){c.attachEvent?c.attachEvent("on"+b,a):c.addEventListener(b,a,false)}window.onunload=function(a){if(_ubaInnerParams.pageHide==true){_ubaInnerParams.unloadActive=true}if(_ubaInnerParams.unloadActive==false){_ubaInnerParams.unloadActive=true;_reportcurrent()}};