var _ubaParams=_ubaParams||{};_ubaParams.cloudBIType=2;_ubaParams.download;_ubaParams.download_suc=1;_ubaParams.Num2=2;_ubaParams.Num4=4;_ubaParams.sdkGaUpload="2";_ubaParams.biReqQueue=_ubaParams.biReqQueue||[];_ubaParams.gaReqQueue=_ubaParams.gaReqQueue||[];_ubaParams.isGAReady=false;_ubaParams.isGAUpload=false;_ubaParams.FirstPageVisit=true;_ubaParams.userAccount;_ubaParams.pageViewID=_ubaParams.pageViewID||guidGenerator();_ubaParams.bi_C1_20=["C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","C11","C12","C13","C14","C15","C16","C17","C18","C19","C20"];_ubaParams.bi_D1_20=["D1","D2","D3","D4","D5","D6","D7","D8","D9","D10","D11","D12","D13","D14","D15","D16","D17","D18","D19","D20"];_ubaParams.bi_ga_appkey;_ubaParams.bi_ga_appkey_ex;_ubaParams.memberID="";function guidGenerator(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&3|8)).toString(16)});return a}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){var b=this;for(var a=0;a<b.length;a++){if(b[a]==c){return a}}return -1}}var JSLoader=function(){var d=[];var c=false;function b(){var e=d.length;for(var g=0;g<e;g++){var f=d.pop();f()}}function a(f){var e=document.createElement("script");e.type="text/javascript";e.async="async";e.src=f;document.body.appendChild(e);if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="complete"||e.readyState=="loaded"){e.onreadystatechange=null;c=true;b()}}}else{e.onload=function(){c=true;b()}}}return{load:function(h){var f=arguments;var e=f.length;a(h);for(var j=1;j<e;j++){var g=f[j];if(typeof g=="function"){if(c){g()}else{d.push(g)}}}}}}();function init(b,d,c,a){if(arguments.length!=_ubaParams.Num4){console.log("Need Four Parameters");return}if(!(a.UserAccount&&typeof d=="string")){console.log("Please Input UserAccount");return}_ubaParams.memberID=a.MemberID||"";_ubaParams.userAccount=a.UserAccount;_ubaParams.bi_ga_appkey=d;if(_ubaParams.download===_ubaParams.download_suc){_initCloudBI(d,a)}else{JSLoader.load("https://res.hc-cdn.com/bi/uba.in.js?v=1.6",function(){_initCloudBI(d,a);_ubaParams.download=_ubaParams.download_suc;if(_ubaParams.biReqQueue){for(var e=0;e<_ubaParams.biReqQueue.length;e++){if(_ubaParams.biReqQueue[e].name=="sendEvent"){_sendEvent(_ubaParams.biReqQueue[e].en,_ubaParams.biReqQueue[e].ec,_ubaParams.biReqQueue[e].ea,_ubaParams.biReqQueue[e].el,_ubaParams.biReqQueue[e].ev,_ubaParams.biReqQueue[e].jp)}else{if(_ubaParams.biReqQueue[e].name=="sendPageView"){_sendPageView(_ubaParams.biReqQueue[e].jp)}}}_ubaParams.biReqQueue=[]}})}if(!(c&&typeof c=="string")||b==1){console.log("no ga upload");return}else{_ubaParams.isGAUpload=true}(function(h,j,n,l,k,f,e){h.GoogleAnalyticsObject=k;h[k]=h[k]||function(){(h[k].q=h[k].q||[]).push(arguments)},h[k].l=1*new Date();f=j.createElement(n),e=j.getElementsByTagName(n)[0];f.async=1;f.src=l;e.parentNode.insertBefore(f,e)})(window,document,"script","https://res.hc-cdn.com/bi/analytics.js?v=2.1","ga");ga("create",c,"auto");_ubaParams.isGAReady=true;if(_ubaParams.gaReqQueue){setTimeout(function(){for(var e=0;e<_ubaParams.gaReqQueue.length;e++){if(_ubaParams.gaReqQueue[e].type=="event"){ga("send","event",_ubaParams.gaReqQueue[e].ec,_ubaParams.gaReqQueue[e].ea,_ubaParams.gaReqQueue[e].el,_ubaParams.gaReqQueue[e].ev,_ubaParams.gaReqQueue[e].jp)}else{if(_ubaParams.gaReqQueue[e].type=="pageview"){ga("send","pageview",_ubaParams.gaReqQueue[e].page,_ubaParams.gaReqQueue[e].jp)}}}_ubaParams.gaReqQueue=[];_ubaParams.FirstPageVisit=false},600)}}var initCBISDK=init;function onEvent(j,e,c,d,b){if(arguments.length<_ubaParams.Num2){console.log("Need At Least Two Parameters");return}if(!(j&&typeof j=="string")){console.log("eventCategory parameter error");return}if(!(e&&typeof e=="string")){console.log("eventAction parameter error");return}var f=j+"_"+e;var a;if(d&&typeof d=="number"){a=d}else{if(d&&typeof d=="string"&&d.indexOf("success")!=-1){a=1}else{a=0}}if(_ubaParams.download!=_ubaParams.download_suc){_ubaParams.biReqQueue.push({name:"sendEvent",en:f,ec:j,ea:e,el:c,ev:d,jp:b})}else{_sendEvent(f,j,e,c,d,b)}if(!_ubaParams.isGAUpload){return}var g={};var i="";if(typeof(b)=="object"&&Object.prototype.toString.call(b).toLowerCase()=="[object object]"&&!b.length){for(var h in b){if(_ubaParams.bi_C1_20.indexOf(h)>-1){i=h.replace("C","metric");g[i]=b[h]}else{if(_ubaParams.bi_D1_20.indexOf(h)>-1){i=h.replace("D","dimension");g[i]=b[h]}}}}g.dimension1=_ubaParams.userAccount;_ubaParams.bi_ga_appkey_ex=b?(b.AppKey||b.Appkey||_ubaParams.bi_ga_appkey):_ubaParams.bi_ga_appkey;if(_ubaParams.isGAReady){ga("send","event",j,e,c,a,g)}else{_ubaParams.gaReqQueue.push({type:"event",ec:j,ea:e,el:c,ev:a,jp:g})}}function onPageView(e,d){if(_ubaParams.download!=_ubaParams.download_suc){_ubaParams.biReqQueue.push({name:"sendPageView",jp:d})}else{_sendPageView(d)}if(!_ubaParams.isGAUpload){return}var a={};var b="";if(typeof(d)=="object"&&Object.prototype.toString.call(d).toLowerCase()=="[object object]"&&!d.length){for(var c in d){if(_ubaParams.bi_C1_20.indexOf(c)>-1){b=c.replace("C","metric");a[b]=d[c]}else{if(_ubaParams.bi_D1_20.indexOf(c)>-1){b=c.replace("D","dimension");a[b]=d[c]}}}a.dimension3=d.subPage}a.dimension1=_ubaParams.userAccount;_ubaParams.bi_ga_appkey_ex=d?(d.AppKey||d.Appkey||_ubaParams.bi_ga_appkey):_ubaParams.bi_ga_appkey;if(_ubaParams.isGAReady){if(_ubaParams.FirstPageVisit){setTimeout(function(){ga("send","pageview",e?e:location.pathname+location.hash,a)},600);_ubaParams.FirstPageVisit=false}else{ga("send","pageview",e?e:location.pathname+location.hash,a)}}else{_ubaParams.gaReqQueue.push({type:"pageview",page:e?e:location.pathname+location.hash,jp:a})}}function setParam(d){if(arguments.length<_ubaParams.download_suc){return}if(typeof(d)=="object"&&Object.prototype.toString.call(d).toLowerCase()=="[object object]"&&!d.length){if(typeof setParams=="function"){setParams(d)}if(_ubaParams.cloudBIType==_ubaParams.sdkGaUpload){var a={};var b="";for(var c in d){if(_ubaParams.bi_C1_20.indexOf(c)>-1){b=c.replace("C","metric");a[b]=d[c]}else{if(_ubaParams.bi_D1_20.indexOf(c)>-1){b=c.replace("D","dimension");a[b]=d[c]}}}a.dimension1=_ubaParams.userAccount;ga("set",a)}}}function onDmpa(b,c){(function(e,h,g,d,f){h[d]=h[d]||function(){(h[d].q=h[d].q||[]).push(arguments)};setTimeout(function(){var j=document.createElement("iframe");(j.frameElement||j).style.cssText="display:none";j.src="javascript:false";var k=0;var i=document.getElementById("dmpa_script");if(document.getElementsByTagName("script").length>1){k=document.getElementsByTagName("script").length-1}i=i?i:document.getElementsByTagName("script")[k];i.parentNode.insertBefore(j,i);var l=j.contentWindow.document;var m=window.location.protocol;l.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+m+"//"+e+"?hr="+new Date().getTime()+"';document.body.appendChild(js);\">");l.close()},0)}("nebula-collector.huawei.com/api/2.0/dmpa_f-min.js",window,document,"dmpa",length));var a=b?b:"";dmpa("setAutoSendPV",false);dmpa("set",{siteId:"hwc-cn",user_id:a});dmpa("trackPageView")}function onException(d,f,g){if(_ubaParams.cloudBIType==_ubaParams.sdkGaUpload){var b={};var c="";for(var e in g){if(_ubaParams.bi_C1_20.indexOf(e)>-1){c=e.replace("C","metric");b[c]=g[e]}else{if(_ubaParams.bi_D1_20.indexOf(e)>-1){c=e.replace("D","dimension");b[c]=g[e]}}}b.dimension1=_ubaParams.userAccount;b.metric21=g.AppKey||g.Appkey||_ubaParams.bi_ga_appkey;if(_ubaParams.isGAReady){ga("send","event","exception",d,f,b,0,true)}else{_ubaParams.gaReqQueue.push({type:"event",ec:"exception",ea:d,el:f,ev:0,jp:b})}}var h=new _BiBase64Func();var a;d=d?d.toString().substr(0,512):"";if(typeof f!=="number"){a=f?f.toString().substr(0,512):"";a=h.encode(a)}else{a=f}if(_ubaParams.download!=_ubaParams.download_suc){_ubaParams.biReqQueue.push({name:"sendEvent",en:"exception",ec:"",ea:"",el:d,ev:a,jp:g})}else{_sendEvent("exception","","",d,a,g)}}var _oldBiError;if(typeof window.onerror=="function"){_oldBiError=window.onerror}var _biUrlDebug=location.search||"";if(_biUrlDebug.indexOf("bi_isdebug")>-1){}else{window.onerror=function(e,c,a,d,f,b){if(b){return}if(f){onException(f.message,f.stack,{D2:location.href})}else{onException(e,location.href,"")}if(_oldBiError!=undefined){_oldBiError(e,c,a,d,f,true)}}}var _oldBiOnload;var _biLoaded;if((typeof window.onload)=="function"){_oldBiOnload=window.onload}window.onload=function(){if(_biLoaded){return}_biLoaded=true;if(typeof _oldBiOnload=="function"){_oldBiOnload()}var b=document.querySelectorAll("body [mate_data_vs]");if(b.length&&(b.length>0)){_eachBiFunc(b,function(k,h){var j=h.getAttribute("mate_data_vs");var m=j.split(".");var l={};var g="";if(m.length>2){g=m[0];l.C1=m[1];l.D15=m[2]}else{if(m.length===2){l.C1=m[0];l.D15=m[1]}else{g=m[0]}}l.subPage=g;onPageView(location.pathname+location.hash,l)})}var d=(performance&&(typeof performance.getEntries=="function"))?performance.getEntries():[];var a=d.length;for(var e=0;e<a;e++){var f=d[e].name;var c=d[e].duration;if(c>2*60000){onException(f,c,"")}}};var _eachBiFunc=function(a,d){var c=(function(){switch(a.constructor){case Object:return"Object";break;case Array:return"Array";break;case NodeList:return"NodeList";break;default:return"null";break}})();if(c==="Array"||c==="NodeList"){[].every.call(a,function(e,f){return d.call(e,f,e)===false?false:true})}else{if(c==="Object"){for(var b in a){if(d.call(a[b],b,a[b])===false){break}}}}};function _BiBase64Func(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=_utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+_keyStr.charAt(j)+_keyStr.charAt(g)+_keyStr.charAt(e)+_keyStr.charAt(d)}return a};this.decode=function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=_keyStr.indexOf(c.charAt(b++));g=_keyStr.indexOf(c.charAt(b++));e=_keyStr.indexOf(c.charAt(b++));d=_keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=_utf8_decode(a);return a};_utf8_encode=function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a};_utf8_decode=function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};